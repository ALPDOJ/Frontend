@namespace Client.Pages.Account
@page "/account/settings"

<GridContent>
	@if (User is not null) {
		<CascadingValue Value="@User">
			<CascadingValue Name="@("Avatar")" Value="@Avatar">
				<Tabs Centered>
					<TabPane Tab="基本资料" Key="1" Class="tab-pane">
						<BasicView />
					</TabPane>
					<TabPane Tab="邮件提醒" Key="2" Class="tab-pane">
						<EmailView />
					</TabPane>
					<TabPane Tab="消息通知" Key="3" Class="tab-pane">
						<NotificationView />
					</TabPane>
				</Tabs>
			</CascadingValue>
		</CascadingValue>
	}
</GridContent>

<style scoped>
	.tab-pane {
		
	}
</style>

@code {

	[Inject]
	private LocalStorageManager LocalStorageManager { get; init; }

	private User? User { get; set; }

	private string? Avatar { get; set; }

	protected override  async Task OnInitializedAsync() {
		await base.OnInitializedAsync();
		User = await LocalStorageManager.GetCurrentUser();
		Avatar = await LocalStorageManager.GetCurrentUserAvatar();
	}

}
